<!DOCTYPE html>
<html lang="en">

<html>
    <head>
        <title>Signup Page</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="login&signup.css">
    </head>
<body>
  <div id ="signupContainer" class="loginSignUpContainer">
        <div class="col1">
            <form onsubmit="return Loginpage()">
            <div class="header">
                <div class="logo">
                    <img src="pics/logo.png" width="130px" height="130px">  
                </div>
                <p class="title">Sign Up now!</p>
            </div>                

            <label for="username">Username</label>
            <input type="text" placeholder="Enter username" id="username" name="username" required>
            <div class="error-message" id="usernameError"></div>

            <label for="email">Email Address</label>
            <input type="email" placeholder="Enter Your Mail" id="email" name="email" required>
            <div class="error-message" id="emailError"></div>

            <label for="password">Password</label>
            <input type="password" placeholder="Enter Password" id="password" name="password" required>
            <div class="error-message" id="passwordError"></div>

            <label for="password-repeat">Repeat Password</label>
            <input type="password" placeholder="Repeat Password" id="password-repeat" name="password-repeat" required>
            <div class="error-message" id="repeatPasswordError"></div>
            
            <label style="font-size: small;">
            <input type="checkbox" checked="checked" name="terms" required> By creating an account you agree to our <a href="terms&condition.html">Terms & Privacy</a>.
            </label> 

            <div class="button-container">
            <button type="button" class="cancel-btn" onclick="window.location.href='index.html'">Cancel</button>
            <button type="submit" class="signup-btn">Sign Up</button>
            </div>
            </form>
        
            <div class="success-message">Sign up successfully!<br>Redirecting to Login page...</div>
        </div>
    
        <div class="col2">
        </div>
  </div>

<script>
    function Loginpage() {
        let valid = true;

        if (!validateUsername()) valid = false;
        if (!validateEmail()) valid = false;
        if (!validatePassword()) valid = false;
        if (!validateRepeatPassword()) valid = false;
        
        if (valid) {
            saveSignUpData();
            showSignupSuccessMessage();
            return false; 
        }
        return valid;
    }

    function saveSignUpData() {
            localStorage.setItem('signupUsername', document.getElementById('username').value);
            localStorage.setItem('signupEmail', document.getElementById('email').value);
            localStorage.setItem('signupPassword', document.getElementById('password').value);
        }

    function showSignupSuccessMessage() {
        document.getElementById('signupContainer').classList.add('submitted');
        setTimeout(function () { 
            window.location.href='index.html'
        }, 1000);
    }

    function validateUsername() {
    const username = document.getElementById('username').value;
    const usernameError = document.getElementById('usernameError');

        if (username.trim() === '') {
            usernameError.innerText = 'Username is required.';
            return false;
        } else {
            usernameError.innerText = '';
            return true;
        }
    }


    function validateEmail() {
        const email = document.getElementById('email').value;
        const emailError = document.getElementById('emailError');
        const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{3,6}$/;
        
        if (email.trim() == '') {
            emailError.innerText = 'Email is required.';
            return false;
        }
        if (!emailPattern.test(email)) {
            emailError.innerText = 'Invalid email address.';
            return false;
        } else {
            emailError.innerText = '';
            return true;
        }
    }

    function validatePassword() {
        const password = document.getElementById('password').value;
        const passwordError = document.getElementById('passwordError');
        const passwordPattern = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/;

        if (password.trim() == '') {
            passwordError.innerText = 'Password is required.';
            return false;
        } else if (!passwordPattern.test(password)) {
            passwordError.innerText = 'Must contain at least 1 number & 1 uppercase and lowercase letter, and at least 8 or more characters';
            return false;
        } else {
            passwordError.innerText = '';
            return true;
        }
    }

    function validateRepeatPassword() {
        const password = document.getElementById('password').value;
        const repeatPassword = document.getElementById('password-repeat').value;
        const repeatPasswordError = document.getElementById('repeatPasswordError');

        if (repeatPassword.trim() == '') {
            repeatPasswordError.innerText = 'Please repeat your password.';
            return false;
        } else if (password !== repeatPassword) {
            repeatPasswordError.innerText = 'Passwords do not match.';
            return false;
        } else {
            repeatPasswordError.innerText = '';
            return true;
        }
    }

    function validateTerms() {
        const terms = document.getElementById('terms');
        const termsError = document.getElementById('termsError');

        if (!terms.checked) {
            termsError.innerText = 'You must agree to the terms and conditions.';
            return false;
        } else {
            termsError.innerText = '';
            return true;
        }
    }
    document.getElementById('username').addEventListener('input', validateUsername);
    document.getElementById('email').addEventListener('input', validateEmail);
    document.getElementById('password').addEventListener('input', validatePassword);
    document.getElementById('password-repeat').addEventListener('input', validateRepeatPassword);

</script>

</body>
</html>
